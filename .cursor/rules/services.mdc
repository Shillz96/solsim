---
description: Backend Fastify + Prisma service conventions
globs:
  - "backend/src/**/*.ts"
alwaysApply: false
---

### 🔐 Service Pattern
- Define routes under `/routes/`; register in `src/index.ts`.
- Implement logic in `/services/` files using async/await.
- All DB writes go through Prisma transactions.
- Use Redis for caching and rate-limiting.
- Validate all route params with Zod.

### 🧾 Example
```ts
// backend/src/services/tradeService.ts
export async function createTrade(req) {
  const user = await prisma.user.findUnique({ where: { id: req.userId } })
  const price = await getPrice(req.mint)
  // ...
}
```