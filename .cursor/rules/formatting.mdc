---
description: Monetary, numeric, and display formatting
globs:
  - "frontend/**/*.tsx"
alwaysApply: false
---

### ðŸ”¢ Numeric Rules
- All components must use helpers from `lib/format.ts`:
  - `formatUSD`, `formatPriceUSD`, `formatQty`, `safePercent`
- Show both USD and SOL equivalents (via `SolEquiv`).
- Guard against divide-by-zero â†’ display "â€”".
- Never round before aggregating; only at render.

### ðŸ§® Decimal Precision
| Value Type | Rule |
|-------------|------|
| USD â‰¥ 10 000 | Compact (`$12.3K`) |
| USD < 10 000 | 2 decimals |
| Price < 1 USD | 3-6 decimals |
| Qty < 1 | 4-6 decimals |
| Percent | Always show sign (+/-), 2 decimals |

### ðŸªª Example
```tsx
<span>{formatUSD(position.valueUsd)}</span>
<SolEquiv usd={position.valueUsd} />
```