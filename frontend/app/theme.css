/**
 * 1UP SOL 2025 Design System - Tailwind v4 CSS Theme
 *
 * This file defines the core design tokens using Tailwind v4's @theme syntax.
 * Mario-themed colors using OKLCH for perceptual uniformity with Display-P3 enhancements.
 *
 * Benefits:
 * - CSS-first approach (no JavaScript build step for tokens)
 * - Works in both Tailwind utilities AND raw CSS
 * - Automatic P3 enhancement on capable displays
 * - Better IDE autocomplete
 */

@theme {
  /**
   * MARIO THEME - CORE BRAND COLORS
   * Using OKLCH color space for perceptually uniform Mario colors
   */

  /* Mario Red - Primary brand color */
  --color-brand: oklch(55% 0.22 27);        /* Mario Red #E52521 */
  --color-brand-hover: oklch(50% 0.24 27);  /* Darker Mario Red */

  /* Luigi Green - Secondary brand */
  --color-luigi: oklch(62% 0.18 145);       /* Luigi Green #43B047 */

  /* Super Star Yellow */
  --color-star: oklch(88% 0.16 85);         /* Star Yellow #FFD800 */

  /* Coin Gold */
  --color-coin: oklch(82% 0.14 75);         /* Coin Gold #FFB915 */

  /* Sky Blue */
  --color-sky: oklch(85% 0.08 230);         /* Sky Blue #A6D8FF */

  /* Super Blue */
  --color-super: oklch(52% 0.20 265);       /* Super Blue #2B4EF9 */

  /* Pipe Green */
  --color-pipe: oklch(52% 0.16 160);        /* Pipe Green #00994C */

  /* Brick Brown */
  --color-brick: oklch(48% 0.10 45);        /* Brick Brown #9C5818 */
  
  /* Unified Outline Token - Single source of truth - Warmer black for softer appearance */
  --outline-black: oklch(15% 0 20);          /* Warm Outline Black - softer than pure black */
  --color-outline-black: var(--outline-black); /* Alias for backward compatibility */

  /* Coin Yellow - Additional variant */
  --coin-yellow: oklch(85% 0.18 80);        /* Coin Yellow #FFD700 */

  /* Backward-compatible hex aliases - Reference OKLCH definitions above */
  --mario-red: var(--color-brand);
  --luigi-green: var(--color-luigi);
  --star-yellow: var(--color-star);
  --coin-gold: var(--color-coin);
  --sky-blue: var(--color-sky);
  --brick-brown: var(--color-brick);
  --pipe-green: var(--color-pipe);

  /* Additional color aliases for consistency */
  --color-mario-red: var(--color-brand);
  --color-luigi-green: var(--color-luigi);
  --color-star-yellow: var(--color-star);
  --color-coin-gold: var(--color-coin);
  --color-brick-brown: var(--color-brick);
  --color-sky-blue: var(--color-sky);
  --color-pipe-green: var(--color-pipe);

  /* Trading-specific colors - Luigi Green for profit, Mario Red for loss */
  --color-profit: oklch(62% 0.18 145);      /* Luigi Green - WCAG AA compliant */
  --color-loss: oklch(55% 0.22 27);         /* Mario Red - WCAG AA compliant */

  /* Trading action colors - Vivid for attention-grabbing CTAs */
  --color-buy: oklch(62% 0.18 145);         /* Luigi Green for buy */
  --color-sell: oklch(55% 0.22 27);         /* Mario Red for sell */

  /**
   * CHART COLORS - MARIO THEMED
   * Colorful palette for data visualization
   */
  --color-chart-primary: oklch(0 0 0);          /* Black/White (theme-aware) */
  --color-chart-profit: oklch(62% 0.18 145);    /* Luigi Green */
  --color-chart-loss: oklch(55% 0.22 27);       /* Mario Red */
  --color-chart-neutral: oklch(45% 0 0);        /* Gray */
  --color-chart-accent: oklch(88% 0.16 85);     /* Star Yellow */

  /**
   * UI TOKENS
   * Consistent spacing, shadows, and effects
   */

  /* Border radius scale - Modern 2025 aesthetic */
  --radius-xs: 0.25rem;   /* 4px */
  --radius-sm: 0.375rem;  /* 6px */
  --radius: 0.5rem;       /* 8px - default */
  --radius-md: 0.625rem;  /* 10px - cards, panels */
  --radius-lg: 0.75rem;   /* 12px - dialogs, modals */
  --radius-xl: 1rem;      /* 16px */
  --radius-2xl: 1.5rem;   /* 24px */

  /* Shadow scale - Refined 2025 style */
  --shadow-xs: 0 1px 2px oklch(0 0 0 / 0.03);
  --shadow-sm: 0 1px 3px oklch(0 0 0 / 0.05);
  --shadow-card: 0 2px 4px oklch(0 0 0 / 0.04), 0 1px 2px oklch(0 0 0 / 0.03);
  --shadow-card-hover: 0 4px 8px oklch(0 0 0 / 0.06), 0 2px 4px oklch(0 0 0 / 0.04);
  --shadow-dropdown: 0 8px 16px -4px oklch(0 0 0 / 0.08), 0 4px 8px -2px oklch(0 0 0 / 0.04);
  --shadow-modal: 0 20px 40px -8px oklch(0 0 0 / 0.15);

  /* Transition durations */
  --transition-fast: 0.15s;
  --transition: 0.2s;
  --transition-slow: 0.3s;

  /* Animation easing */
  --ease: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);

  /* Font System - 3-Font Hierarchy */
  --font-display: "Luckiest Guy", "Impact", "Arial Black", sans-serif;
  --font-body: "Manrope", -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Helvetica Neue", "Arial", sans-serif;
  --font-numeric: "JetBrains Mono", "Monaco", "Consolas", "Courier New", monospace;

  /* Base UI Colors - Warm Paper Cream Background */
  --background: #FFFAE9;
  --foreground: #000000;
  --card: #FFF8E7;      /* Light Parchment - warm, subtle off-white */
  --border: #E5E5E5;
  --color-border: #E5E5E5;

  /* Navigation Heights */
  --navbar-height: 56px;
  --bottom-nav-height: 64px;
  --trending-ticker-height: 60px;

  /* Warp Pipes Token Card Metrics */
  --token-card-height: 200px;
  --token-card-image-size: 120px;
  --token-card-padding: 1rem;
  --token-card-gap: 0.75rem;

  /* Metric Display Colors */
  --metric-label-color: var(--outline-black);
  --metric-value-color: var(--outline-black);
  --metric-positive: var(--luigi-green);
  --metric-negative: var(--mario-red);
  --metric-neutral: var(--pipe-green);

  /**
   * DROPDOWN/POPUP SYSTEM - Unified styling for all navbar popups
   * 
   * Consistent appearance for:
   * - Search dropdowns
   * - Profile menus
   * - Notification panels
   * - Navigation submenus
   */
  
  /* Dropdown Container */
  --dropdown-bg: var(--card);
  --dropdown-border: 3px solid var(--outline-black);
  --dropdown-shadow: 
    4px 4px 0 var(--outline-black),
    0 8px 16px rgba(0, 0, 0, 0.08);
  --dropdown-radius: var(--radius-lg);
  --dropdown-padding: 0.5rem;
  
  /* Dropdown Items */
  --dropdown-item-padding: 0.75rem 1rem;
  --dropdown-item-radius: var(--radius-md);
  --dropdown-item-hover-bg: color-mix(in oklab, var(--mario-red) 10%, transparent 90%);
  --dropdown-item-active-bg: color-mix(in oklab, var(--mario-red) 20%, transparent 80%);
  
  /* Dropdown Separators */
  --dropdown-separator: 2px solid var(--outline-black);
  
  /* Dropdown Animation */
  --dropdown-transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

  /**
   * PANEL SYSTEM - Consolidated from panel.css
   * All panel-related tokens in one place for consistency
   */
  
  /* Background mixes */
  --panel-bg-dark: color-mix(in oklab, var(--background) 90%, black 10%);
  --panel-bg-light: color-mix(in oklab, var(--background) 92%, transparent 8%);
  --panel-bg-opaque: color-mix(in oklab, var(--background) 95%, transparent 5%);
  --panel-bg-glass: color-mix(in oklab, var(--background) 70%, transparent 30%);
  
  /* Border mixes */
  --panel-border-subtle: color-mix(in oklab, var(--foreground) 20%, transparent 80%);
  --panel-border-medium: color-mix(in oklab, var(--foreground) 30%, transparent 70%);
  
  /* Card backgrounds */
  --card-bg-elevated: color-mix(in oklab, var(--card) 95%, var(--background) 5%);
  --card-bg-muted: color-mix(in oklab, var(--muted) 95%, var(--background) 5%);
  
  /* Shadow mixes */
  --shadow-light: color-mix(in oklab, black 10%, transparent 90%);
  --shadow-medium: color-mix(in oklab, black 25%, transparent 75%);
  
  /* Hover states */
  --hover-overlay: color-mix(in oklab, var(--ring) 20%, transparent 80%);

  /**
   * BADGE SYSTEM - Consolidated from badges.css
   * All badge rarity colors using theme color references
   */
  
  /* Common rarity */
  --badge-common-bg: var(--luigi-green);
  --badge-common-border: color-mix(in oklab, var(--luigi-green) 80%, black 20%);
  
  /* Uncommon rarity */
  --badge-uncommon-bg: var(--sky-blue);
  --badge-uncommon-border: color-mix(in oklab, var(--sky-blue) 70%, blue 30%);
  
  /* Rare rarity */
  --badge-rare-bg: var(--star-yellow);
  --badge-rare-border: color-mix(in oklab, var(--star-yellow) 80%, #9a6200 20%);
  
  /* Epic rarity */
  --badge-epic-bg: var(--mario-red);
  --badge-epic-border: color-mix(in oklab, var(--mario-red) 85%, black 15%);
  
  /* Legendary rarity */
  --badge-legendary-bg: var(--coin-gold);
  --badge-legendary-border: color-mix(in oklab, var(--coin-gold) 80%, #9a6200 20%);
  
  /* Mythic rarity */
  --badge-mythic-bg: var(--star-yellow);
  --badge-mythic-border: color-mix(in oklab, var(--star-yellow) 90%, gold 10%);
  
  /* Admin rarity - Special Mario Red styling for platform administrators */
  --badge-admin-bg: var(--mario-red);
  --badge-admin-border: color-mix(in oklab, var(--mario-red) 85%, black 15%);

  /**
   * Z-INDEX SCALE - Single source of truth for all layering
   * 
   * This unified system replaces conflicting z-index values across:
   * - panel.css
   * - tailwind.config.js
   * - wallet-modal-override.css
   * - globals.css
   * - All component inline styles
   * 
   * Scale Structure:
   * 0-10: Base content layers
   * 100-900: Interface elements (headers, nav, dropdowns)
   * 1000-1900: Overlays (modals, popovers, tooltips)
   * 2000+: System overlays (toasts, loading, alerts)
   * 9000+: Critical UI elements (highest priority for user interaction)
   * 9999: Debug & texture overlays
   * 
   * USAGE GUIDELINES:
   * 
   * 1. ALWAYS use semantic z-index custom properties from this scale
   *    ✅ CORRECT: className="z-modal" or z-index: var(--z-modal)
   *    ❌ WRONG:   className="z-50" or z-index: 50
   * 
   * 2. Use hardcoded z-10/z-20 ONLY for local stacking contexts
   *    - Example: Positioning text above background within same card
   *    - Example: Layering icons within a single button component
   *    - These values never interact with the global scale
   * 
   * 3. Component-to-component layering MUST use semantic values
   *    - Dropdowns: z-dropdown (300) or z-search-dropdown (9001) for search
   *    - Modals: z-modal-backdrop (1000) + z-modal (1010)
   *    - Floating panels: z-popover (1200) or z-sticky (500)
   *    - Loading screens: z-loading (2100)
   *    - Toasts: z-toast (2000)
   * 
   * 4. Tailwind utilities map to these custom properties
   *    - z-modal → var(--z-modal)
   *    - z-dropdown → var(--z-dropdown)
   *    - See tailwind.config.js for complete mapping
   * 
   * 5. Dynamic z-index in components
   *    - FloatingWindows: Use style={{ zIndex: 'var(--z-modal)' }}
   *    - Window stacking: Relative to container's base z-index
   */
  
  /* Base Content Layers (0-10) */
  --z-base: 0;
  --z-background-texture: 1;      /* Background texture layer */
  --z-content: 2;                 /* Main content layer */
  
  /* Interface Elements (100-900) */
  --z-header: 100;
  --z-nav: 200;
  --z-dropdown: 300;
  --z-sidebar: 400;
  --z-sticky: 500;
  
  /* Overlay Elements (1000-1900) */
  --z-modal-backdrop: 1000;
  --z-modal: 1010;
  --z-wallet-modal-backdrop: 1100;  /* Wallet modal system */
  --z-wallet-modal: 1110;           /* Wallet modal content */
  --z-popover: 1200;
  --z-badge-tooltip: 1300;
  --z-tooltip: 1400;
  
  /* System Overlays (2000+) */
  --z-toast: 2000;
  --z-loading: 2100;
  --z-onboarding: 2200;
  
  /* Critical UI Elements (9000+) - Highest priority for user interaction */
  --z-rewards-timer: 9006;        /* Rewards countdown timer – above bottom nav & emoji */
  --z-search-dropdown: 9001;     /* Search bar dropdown */
  --z-profile-dropdown: 9002;    /* Profile dropdown menu */
  --z-bottom-nav: 9003;          /* Bottom navigation bar */
  --z-emoji-picker: 9004;        /* Emoji picker overlay */
  
  /* Debug & Special (9999) */
  --z-debug: 9998;
}

/**
 * WIDE-GAMUT COLOR ENHANCEMENT (Display-P3) - MARIO THEME
 *
 * These colors are more vivid and saturated on modern displays that support P3 color space:
 * - MacBooks (2015+)
 * - iPhones (iPhone 7+)
 * - High-end monitors
 *
 * Browsers automatically fall back to sRGB if P3 is not supported.
 */
@media (color-gamut: p3) {
  @theme {
    /* Enhanced Mario Red - More vivid on P3 displays */
    --color-brand: color(display-p3 0.90 0.15 0.13);        /* Mario Red P3 */
    --color-brand-hover: color(display-p3 0.70 0.11 0.10);  /* Darker Mario Red P3 */

    /* Enhanced Luigi Green */
    --color-luigi: color(display-p3 0.26 0.69 0.28);        /* Luigi Green P3 */

    /* Enhanced Star Yellow */
    --color-star: color(display-p3 1.0 0.85 0.0);           /* Star Yellow P3 */

    /* Enhanced Coin Gold */
    --color-coin: color(display-p3 1.0 0.72 0.08);          /* Coin Gold P3 */

    /* Enhanced Coin Yellow */
    --coin-yellow: color(display-p3 1.0 0.84 0.0);          /* Coin Yellow P3 */

    /* Enhanced Sky Blue */
    --color-sky: color(display-p3 0.65 0.85 1.0);           /* Sky Blue P3 */

    /* Enhanced Super Blue */
    --color-super: color(display-p3 0.17 0.31 0.98);        /* Super Blue P3 */

    /* Enhanced Pipe Green */
    --color-pipe: color(display-p3 0.0 0.60 0.30);          /* Pipe Green P3 */

    /* Enhanced Brick Brown */
    --color-brick: color(display-p3 0.61 0.35 0.09);        /* Brick Brown P3 */

    /* Trading colors reference brand colors */
    --color-profit: var(--color-luigi);
    --color-loss: var(--color-brand);
    --color-buy: var(--color-luigi);
    --color-sell: var(--color-brand);

    /* Chart colors reference brand colors */
    --color-chart-profit: var(--color-luigi);
    --color-chart-loss: var(--color-brand);
    --color-chart-accent: var(--color-star);
  }
}

/**
 * ACCESSIBILITY: REDUCED MOTION
 *
 * Respects user's preference for reduced motion.
 * Disables animations and reduces transition times.
 */
@media (prefers-reduced-motion: reduce) {
  @theme {
    --transition-fast: 0.01ms;
    --transition: 0.01ms;
    --transition-slow: 0.01ms;
  }
}

/**
 * USAGE EXAMPLES
 *
 * Tailwind utilities (auto-generated from @theme):
 * <div className="bg-brand text-profit shadow-card rounded-md" />
 *
 * Raw CSS custom properties:
 * <div style={{ color: 'var(--color-buy)' }} />
 *
 * Dropdown/Popup System:
 * <div className="dropdown-base dropdown-animate-in">
 *   <div className="dropdown-header">Menu Title</div>
 *   <a href="#" className="dropdown-item">
 *     <Icon /> Item Label
 *   </a>
 *   <div className="dropdown-separator"></div>
 *   <a href="#" className="dropdown-item dropdown-item-danger">
 *     <Icon /> Logout
 *   </a>
 * </div>
 *
 * Specific dropdown types:
 * - dropdown-search: For search results
 * - dropdown-profile: For user profile menu
 * - dropdown-notifications: For notification panel
 *
 * Both automatically get P3 enhancement on capable displays!
 */
