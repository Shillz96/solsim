/**
 * 1UP SOL 2025 Design System - Tailwind v4 CSS Theme
 *
 * This file defines the core design tokens using Tailwind v4's @theme syntax.
 * Mario-themed colors using OKLCH for perceptual uniformity with Display-P3 enhancements.
 *
 * Benefits:
 * - CSS-first approach (no JavaScript build step for tokens)
 * - Works in both Tailwind utilities AND raw CSS
 * - Automatic P3 enhancement on capable displays
 * - Better IDE autocomplete
 */

@theme {
  /**
   * MARIO THEME - CORE BRAND COLORS
   * Using OKLCH color space for perceptually uniform Mario colors
   */

  /* Mario Red - Primary brand color */
  --color-brand: oklch(55% 0.22 27);        /* Mario Red #E52521 */
  --color-brand-hover: oklch(50% 0.24 27);  /* Darker Mario Red */

  /* Luigi Green - Secondary brand */
  --color-luigi: oklch(62% 0.18 145);       /* Luigi Green #43B047 */

  /* Super Star Yellow */
  --color-star: oklch(88% 0.16 85);         /* Star Yellow #FFD800 */

  /* Coin Gold */
  --color-coin: oklch(82% 0.14 75);         /* Coin Gold #FFB915 */

  /* Sky Blue */
  --color-sky: oklch(85% 0.08 230);         /* Sky Blue #A6D8FF */

  /* Super Blue */
  --color-super: oklch(52% 0.20 265);       /* Super Blue #2B4EF9 */
  
  /* Additional UI tokens */
  --input: #ffffff;
  --ring: var(--color-brand);
  --accent: var(--color-star);
  --secondary: var(--muted);
  --secondary-foreground: var(--foreground);
  --muted: #f5f5f5;
  --muted-foreground: #666666;
  --accent-foreground: var(--outline-black);
  --destructive: var(--mario-red);
  --destructive-foreground: #ffffff;
  --card-foreground: var(--foreground);
  --popover: var(--card);
  --popover-foreground: var(--foreground);
  --dropdown: var(--card);
  --dropdown-foreground: var(--foreground);
  --dropdown-border: var(--border);
  --modal: var(--card);
  --modal-foreground: var(--foreground);
  --modal-border: var(--border);

  /* Pipe Green */
  --color-pipe: oklch(52% 0.16 160);        /* Pipe Green #00994C */

  /* Brick Brown */
  --color-brick: oklch(48% 0.10 45);        /* Brick Brown #9C5818 */
  
  /* Softer warm ink for borders/outlines */
  --outline-black: oklch(22% 0.02 30);       /* Warm ink (less harsh than near-black) */
  --outline-hover: oklch(30% 0.03 30);       /* Hover/active ink */
  --color-outline-black: var(--outline-black); /* Alias for backward compatibility */

  /* Coin Yellow - Additional variant */
  --coin-yellow: oklch(85% 0.18 80);        /* Coin Yellow #FFD700 */

  /* Unified color aliases - Single source of truth */
  --mario-red: var(--color-brand);
  --luigi-green: var(--color-luigi);
  --star-yellow: var(--color-star);
  --coin-gold: var(--color-coin);
  --sky-blue: var(--color-sky);
  --brick-brown: var(--color-brick);
  --pipe-green: var(--color-pipe);
  
  /* Tailwind utility class color mappings (bg-mario, text-mario, etc.) */
  --color-mario: var(--mario-red);
  --color-outline: var(--outline-black);
  
  /* Legacy aliases for backward compatibility */
  --color-mario-red: var(--color-brand);
  --color-luigi-green: var(--color-luigi);
  --color-star-yellow: var(--color-star);
  --color-coin-gold: var(--color-coin);
  --color-brick-brown: var(--color-brick);
  --color-sky-blue: var(--color-sky);
  --color-pipe-green: var(--color-pipe);

  /* Trading-specific colors - Luigi Green for profit, Mario Red for loss */
  --color-profit: oklch(62% 0.18 145);      /* Luigi Green - for large text/backgrounds */
  --color-loss: oklch(55% 0.22 27);         /* Mario Red - for large text/backgrounds */

  /* Darker variants for normal text - WCAG AA 4.5:1 compliant */
  --luigi-dark: oklch(48% 0.20 145);        /* Dark Luigi Green for profit text */
  --mario-dark: oklch(48% 0.24 27);         /* Dark Mario Red for loss text */

  /* Trading action colors - Vivid for attention-grabbing CTAs */
  --color-buy: oklch(62% 0.18 145);         /* Luigi Green for buy */
  --color-sell: oklch(55% 0.22 27);         /* Mario Red for sell */

  /**
   * CHART COLORS - MARIO THEMED
   * Colorful palette for data visualization
   */
  --color-chart-primary: oklch(0 0 0);          /* Black/White (theme-aware) */
  --color-chart-profit: oklch(62% 0.18 145);    /* Luigi Green */
  --color-chart-loss: oklch(55% 0.22 27);       /* Mario Red */
  --color-chart-neutral: oklch(45% 0 0);        /* Gray */
  --color-chart-accent: oklch(88% 0.16 85);     /* Star Yellow */

  /* Dark chart theme - for TradingView/charting libraries */
  --chart-bg-dark: oklch(4% 0.01 265);         /* Deep navy #0A0A0F */
  --chart-border-dark: oklch(17% 0.02 265);    /* Muted purple #2B2B43 */

  /**
   * UI TOKENS
   * Consistent spacing, shadows, and effects
   */

  /* Border radius scale - Modern 2025 aesthetic */
  --radius-xs: 0.25rem;   /* 4px */
  --radius-sm: 0.375rem;  /* 6px */
  --radius: 0.5rem;       /* 8px - default */
  --radius-md: 0.625rem;  /* 10px - cards, panels */
  --radius-lg: 0.75rem;   /* 12px - dialogs, modals */
  --radius-xl: 1rem;      /* 16px */
  --radius-2xl: 1.5rem;   /* 24px */

  /* Shadow scale - Refined 2025 style */
  --shadow-xs: 0 1px 2px oklch(0 0 0 / 0.03);
  --shadow-sm: 0 1px 3px oklch(0 0 0 / 0.05);
  --shadow-card: 0 2px 4px oklch(0 0 0 / 0.04), 0 1px 2px oklch(0 0 0 / 0.03);
  --shadow-card-hover: 0 4px 8px oklch(0 0 0 / 0.06), 0 2px 4px oklch(0 0 0 / 0.04);
  --shadow-dropdown: 0 8px 16px -4px oklch(0 0 0 / 0.08), 0 4px 8px -2px oklch(0 0 0 / 0.04);
  --shadow-modal: 0 20px 40px -8px oklch(0 0 0 / 0.15);

  /* Transition durations */
  --transition-fast: 0.15s;
  --transition: 0.2s;
  --transition-slow: 0.3s;

  /* Animation easing */
  --ease: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);

  /* Font System - 3-Font Hierarchy */
  --font-display: "Luckiest Guy", "Impact", "Arial Black", sans-serif;
  --font-body: "Manrope", -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Helvetica Neue", "Arial", sans-serif;
  --font-numeric: "JetBrains Mono", "Monaco", "Consolas", "Courier New", monospace;

  /* Base UI Colors - Warm Paper Cream Background */
  /* Subtle separation between page vs. cards to cut brightness */
  --background: oklch(96% 0.02 90);  /* warm cream, slightly dimmer than before */
  --foreground: #000000;
  --card:       oklch(94% 0.015 90); /* a hair darker than background for contrast */
  --border:     oklch(82% 0.02 90);
  --color-border: #E5E5E5;

  /* Navigation Heights */
  --navbar-height: 56px;
  --bottom-nav-height: 64px;
  --trending-ticker-height: 60px;
  --portfolio-ticker-height: 36px; /* Portfolio positions ticker - minimal compact height */

  /* Z-Index Scale - semantic layers for consistent stacking context */
  --z-base: 0;
  --z-dropdown: 1000;
  --z-sticky: 1020;
  --z-fixed: 1030;
  --z-modal-backdrop: 1040;
  --z-modal: 1050;
  --z-popover: 1060;
  --z-tooltip: 1070;
  --z-toast: 1100;

  /* Spacing Scale - Mario Theme */
  --space-section: 1rem;        /* 16px - Between major panel sections */
  --space-component: 0.75rem;   /* 12px - Between related components */
  --space-control: 0.5rem;      /* 8px - Between form controls */
  --space-tight: 0.375rem;      /* 6px - Between tightly related items */
  --space-grid-sm: 0.5rem;      /* 8px - Small grid gaps */
  --space-grid-md: 1rem;        /* 16px - Medium grid gaps */

  /* Component-Specific Gaps */
  --chat-message-gap: 1rem;     /* 16px - Between chat messages */
  --chat-section-gap: 0.75rem;  /* 12px - Between chat sections */
  --panel-padding: 0.75rem;     /* 12px - Panel internal padding */

  /* Shareable PnL Card Spacing Tokens - micro */
  --share-card-padding: 0.375rem;   /* 6px - outer and inner padding */
  --share-card-gap: 0.5rem;         /* 8px - inter-section gap */
  --share-header-height: 52px;      /* header capsule + shadow height (increased for better prominence) */
  --share-footer-gap: 0.375rem;     /* 6px - footer top spacing */
  --share-header-offset: 30px;      /* extra space for header padding + borders */

  /* Warp Pipes Token Card Metrics - Reduced for more compact view */
  --token-card-height: 160px;
  --token-card-image-size: 100px;
  --token-card-padding: 0.75rem;
  --token-card-gap: 0.5rem;

  /* Trade Panel Spacing System - Unified Vertical Rhythm */
  --trade-section-gap: 1rem;        /* 16px - Between major sections (Header → Stats → Tabs) */
  --trade-tier-gap: 0.875rem;       /* 14px - Between tiers within tabs (Actions → Meta) */
  --trade-stat-gap-x: 0.625rem;     /* 10px - Horizontal gap between stat cards */
  --trade-stat-gap-y: 0.75rem;      /* 12px - Vertical gap between stat rows */
  --trade-control-gap: 0.625rem;    /* 10px - Between form controls (presets, inputs) */
  --trade-action-gap: 0.875rem;     /* 14px - Within action section elements */
  --trade-metric-padding: 0.75rem;  /* 12px - Internal padding for stat cards */
  --trade-tier-padding: 0.875rem;   /* 14px - Internal padding for tier sections */

  /* Metric Display Colors */
  --metric-label-color: var(--outline-black);
  --metric-value-color: var(--outline-black);
  --metric-positive: var(--luigi-green);
  --metric-negative: var(--mario-red);
  --metric-neutral: var(--pipe-green);

  /**
   * DROPDOWN/POPUP SYSTEM - Unified styling for all navbar popups
   * 
   * Consistent appearance for:
   * - Search dropdowns
   * - Profile menus
   * - Notification panels
   * - Navigation submenus
   */
  
  /* Dropdown Container */
  --dropdown-bg: var(--card);
  --dropdown-border: 3px solid var(--outline-black);
  --dropdown-shadow: 
    4px 4px 0 var(--outline-black),
    0 8px 16px rgba(0, 0, 0, 0.08);
  --dropdown-radius: var(--radius-lg);
  --dropdown-padding: 0.5rem;
  
  /* Dropdown Items */
  --dropdown-item-padding: 0.75rem 1rem;
  --dropdown-item-radius: var(--radius-md);
  --dropdown-item-hover-bg: color-mix(in oklab, var(--mario-red) 10%, transparent 90%);
  --dropdown-item-active-bg: color-mix(in oklab, var(--mario-red) 20%, transparent 80%);
  
  /* Dropdown Separators */
  --dropdown-separator: 2px solid var(--outline-black);
  
  /* Dropdown Animation */
  --dropdown-transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

  /**
   * PANEL SYSTEM - Consolidated from panel.css
   * All panel-related tokens in one place for consistency
   */
  
  /* Background mixes (slightly deeper for readability) */
  --panel-bg-dark:   color-mix(in oklab, var(--background) 88%, black 12%);
  --panel-bg-light:  color-mix(in oklab, var(--card) 92%,  black 8%);
  --panel-bg-opaque: color-mix(in oklab, var(--card) 96%,  black 4%);
  --panel-bg-glass:  color-mix(in oklab, var(--background) 72%, transparent 28%);
  
  /* Border mixes */
  --panel-border-subtle: color-mix(in oklab, var(--foreground) 20%, transparent 80%);
  --panel-border-medium: color-mix(in oklab, var(--foreground) 30%, transparent 70%);
  
  /* Card backgrounds */
  --card-bg-elevated: color-mix(in oklab, var(--card) 95%, var(--background) 5%);
  --card-bg-muted: color-mix(in oklab, var(--muted) 95%, var(--background) 5%);

  /* Share Card Background - subtle warm star tint */
  --card-share-bg: color-mix(in oklab, var(--star-yellow) 8%, var(--background) 92%);
  /* Share Card Background Image Overlay */
  /* Use image dropped into /public; served at site root */
  --share-bg-image: url('/24f6ff0a-ff72-4c1f-8c45-e44bbcb0f524.png');
  --share-bg-opacity: 0.5;

  /* Light/Pastel Mario Color Card Variants - No White Cards */
  --card-portfolio: color-mix(in oklab, var(--luigi-green) 15%, var(--background) 85%);  /* Light Luigi green for money/portfolio */
  --card-stats: color-mix(in oklab, var(--star-yellow) 15%, var(--background) 85%);     /* Light star yellow for metrics */
  --card-info: color-mix(in oklab, var(--sky-blue) 15%, var(--background) 85%);         /* Light sky blue for info */
  --card-success: color-mix(in oklab, var(--luigi-green) 20%, var(--background) 80%);   /* Light green for success */
  --card-warning: color-mix(in oklab, var(--mario-red) 10%, var(--background) 90%);     /* Light red for warnings */
  --card-trading: color-mix(in oklab, var(--pipe-green) 10%, var(--background) 90%);    /* Light pipe green for trading */
  --card-token: color-mix(in oklab, var(--sky-blue) 25%, var(--background) 75%);        /* Sky blue for token cards */
  --card-neutral: color-mix(in oklab, var(--pipe-green) 8%, var(--background) 92%);     /* Very light pipe green for neutral */
  
  /* Shadow mixes */
  --shadow-light: color-mix(in oklab, black 10%, transparent 90%);
  --shadow-medium: color-mix(in oklab, black 25%, transparent 75%);
  
  /* Hover states */
  --hover-overlay: color-mix(in oklab, var(--ring) 20%, transparent 80%);

  /**
   * BADGE SYSTEM - Consolidated from badges.css
   * All badge rarity colors using theme color references
   */
  
  /* Common rarity */
  --badge-common-bg: var(--luigi-green);
  --badge-common-border: color-mix(in oklab, var(--luigi-green) 80%, black 20%);
  
  /* Uncommon rarity */
  --badge-uncommon-bg: var(--sky-blue);
  --badge-uncommon-border: color-mix(in oklab, var(--sky-blue) 70%, blue 30%);
  
  /* Rare rarity */
  --badge-rare-bg: var(--star-yellow);
  --badge-rare-border: color-mix(in oklab, var(--star-yellow) 80%, #9a6200 20%);
  
  /* Epic rarity */
  --badge-epic-bg: var(--mario-red);
  --badge-epic-border: color-mix(in oklab, var(--mario-red) 85%, black 15%);
  
  /* Legendary rarity */
  --badge-legendary-bg: var(--coin-gold);
  --badge-legendary-border: color-mix(in oklab, var(--coin-gold) 80%, #9a6200 20%);
  
  /* Mythic rarity */
  --badge-mythic-bg: var(--star-yellow);
  --badge-mythic-border: color-mix(in oklab, var(--star-yellow) 90%, gold 10%);
  
  /* Admin rarity - Special Mario Red styling for platform administrators */
  --badge-admin-bg: var(--mario-red);
  --badge-admin-border: color-mix(in oklab, var(--mario-red) 85%, black 15%);

  /**
   * Z-INDEX SCALE - Single source of truth for all layering
   * 
   * This unified system replaces conflicting z-index values across:
   * - panel.css
   * - tailwind.config.js
   * - wallet-modal-override.css
   * - globals.css
   * - All component inline styles
   * 
   * Scale Structure:
   * 0-10: Base content layers
   * 100-900: Interface elements (headers, nav, dropdowns)
   * 1000-1900: Overlays (modals, popovers, tooltips)
   * 2000+: System overlays (toasts, loading, alerts)
   * 9000+: Critical UI elements (highest priority for user interaction)
   * 9999: Foreground texture overlay (paper grain on top of everything)
   * 
   * PAPER TEXTURE SYSTEM - Refined Professional Design:
   * --z-background-texture: 1 (behind content)
   *   - File: papertexturre-2.avif
   *   - Opacity: 8% (0.08)
   *   - Tile Size: 768px (larger for subtlety)
   *   - Purpose: Very subtle paper texture behind content
   * 
   * --z-foreground-texture: 9999 (on top of everything)
   *   - File: Paper-Texture-7.jpg (as film grain)
   *   - Opacity: 2.5% (0.025) - 1.5% in dark mode
   *   - Tile Size: 256px
   *   - Blend Mode: overlay (soft-light in dark mode)
   *   - Purpose: Subtle professional film grain effect
   * 
   * VIGNETTE SYSTEM:
   *   - Dual radial gradients (top-left & bottom-right)
   *   - Opacity: 3-3.5% black overlay
   *   - Responsive sizing: clamps based on viewport
   *   - Purpose: Adds depth and focus to content
   * 
   * USAGE GUIDELINES:
   * 
   * 1. ALWAYS use semantic z-index custom properties from this scale
   *    ✅ CORRECT: className="z-modal" or z-index: var(--z-modal)
   *    ❌ WRONG:   className="z-50" or z-index: 50
   * 
   * 2. Use hardcoded z-10/z-20 ONLY for local stacking contexts
   *    - Example: Positioning text above background within same card
   *    - Example: Layering icons within a single button component
   *    - These values never interact with the global scale
   * 
   * 3. Component-to-component layering MUST use semantic values
   *    - Dropdowns: z-dropdown (300) or z-search-dropdown (700) for search
   *    - Modals: z-modal-backdrop (1000) + z-modal (1010)
   *    - Wallet modals: z-wallet-modal-backdrop (1100) + z-wallet-modal (1110)
   *    - Floating panels: z-popover (1200) or z-sticky (500)
   *    - Rewards timer: z-rewards-timer (600) - visible but below modals
   *    - Loading screens: z-loading (2100)
   *    - Toasts: z-toast (2000)
   * 
   * 4. Tailwind utilities map to these custom properties
   *    - z-modal → var(--z-modal)
   *    - z-dropdown → var(--z-dropdown)
   *    - See tailwind.config.js for complete mapping
   * 
   * 5. Dynamic z-index in components
   *    - FloatingWindows: Use style={{ zIndex: 'var(--z-modal)' }}
   *    - Window stacking: Relative to container's base z-index
   */
  
  /* Base Content Layers (0-10) */
  --z-base: 0;
  --z-background-texture: 1;      /* Background texture layer (behind content) */
  --z-foreground-texture: 9999;   /* Foreground texture overlay (on top of everything) */
  --z-content: 2;                 /* Main content layer */
  
  /* Interface Elements (100-900) */
  --z-header: 100;
  --z-nav: 200;
  --z-dropdown: 300;
  --z-sidebar: 400;
  --z-sticky: 500;
  
  /* Overlay Elements (1000-1900) */
  --z-modal-backdrop: 1000;
  --z-modal: 1010;
  --z-wallet-modal-backdrop: 1100;  /* Wallet modal system */
  --z-wallet-modal: 1110;           /* Wallet modal content */
  --z-popover: 1200;
  --z-badge-tooltip: 1300;
  --z-tooltip: 1400;
  
  /* System Overlays (2000+) */
  --z-toast: 2000;
  --z-loading: 2100;
  --z-onboarding: 2200;
  
  /* Critical UI Elements (600-900) - High priority but below modals/overlays */
  --z-rewards-timer: 600;        /* Rewards countdown timer – above sticky content, below modals */
  --z-search-dropdown: 700;      /* Search bar dropdown - below modals */
  --z-profile-dropdown: 800;     /* Profile dropdown menu - below modals */
  --z-emoji-picker: 850;         /* Emoji picker overlay - below modals */
  
  /* Bottom Navigation (9000+) - Highest priority for touch targets */
  --z-bottom-nav: 9003;          /* Bottom navigation bar */
  --z-trade-button: 9004;        /* Floating trade button - above navbar */
  
  /* Debug & Special (9999) */
  --z-debug: 9998;
}

/**
 * WIDE-GAMUT COLOR ENHANCEMENT (Display-P3) - MARIO THEME
 *
 * These colors are more vivid and saturated on modern displays that support P3 color space:
 * - MacBooks (2015+)
 * - iPhones (iPhone 7+)
 * - High-end monitors
 *
 * Browsers automatically fall back to sRGB if P3 is not supported.
 */
@media (color-gamut: p3) {
  @theme {
    /* Enhanced Mario Red - More vivid on P3 displays */
    --color-brand: color(display-p3 0.90 0.15 0.13);        /* Mario Red P3 */
    --color-brand-hover: color(display-p3 0.70 0.11 0.10);  /* Darker Mario Red P3 */

    /* Enhanced Luigi Green */
    --color-luigi: color(display-p3 0.26 0.69 0.28);        /* Luigi Green P3 */

    /* Enhanced Star Yellow */
    --color-star: color(display-p3 1.0 0.85 0.0);           /* Star Yellow P3 */

    /* Enhanced Coin Gold */
    --color-coin: color(display-p3 1.0 0.72 0.08);          /* Coin Gold P3 */

    /* Enhanced Coin Yellow */
    --coin-yellow: color(display-p3 1.0 0.84 0.0);          /* Coin Yellow P3 */

    /* Enhanced Sky Blue */
    --color-sky: color(display-p3 0.65 0.85 1.0);           /* Sky Blue P3 */

    /* Enhanced Super Blue */
    --color-super: color(display-p3 0.17 0.31 0.98);        /* Super Blue P3 */

    /* Enhanced Pipe Green */
    --color-pipe: color(display-p3 0.0 0.60 0.30);          /* Pipe Green P3 */

    /* Enhanced Brick Brown */
    --color-brick: color(display-p3 0.61 0.35 0.09);        /* Brick Brown P3 */

    /* Trading colors reference brand colors */
    --color-profit: var(--color-luigi);
    --color-loss: var(--color-brand);
    --color-buy: var(--color-luigi);
    --color-sell: var(--color-brand);

    /* Chart colors reference brand colors */
    --color-chart-profit: var(--color-luigi);
    --color-chart-loss: var(--color-brand);
    --color-chart-accent: var(--color-star);
  }
}

/**
 * ACCESSIBILITY: REDUCED MOTION
 *
 * Respects user's preference for reduced motion.
 * Disables animations and reduces transition times.
 */
@media (prefers-reduced-motion: reduce) {
  @theme {
    --transition-fast: 0.01ms;
    --transition: 0.01ms;
    --transition-slow: 0.01ms;
  }
}

/**
 * USAGE EXAMPLES
 *
 * Tailwind utilities (auto-generated from @theme):
 * <div className="bg-brand text-profit shadow-card rounded-md" />
 *
 * Raw CSS custom properties:
 * <div style={{ color: 'var(--color-buy)' }} />
 *
 * Dropdown/Popup System:
 * <div className="dropdown-base dropdown-animate-in">
 *   <div className="dropdown-header">Menu Title</div>
 *   <a href="#" className="dropdown-item">
 *     <Icon /> Item Label
 *   </a>
 *   <div className="dropdown-separator"></div>
 *   <a href="#" className="dropdown-item dropdown-item-danger">
 *     <Icon /> Logout
 *   </a>
 * </div>
 *
 * Specific dropdown types:
 * - dropdown-search: For search results
 * - dropdown-profile: For user profile menu
 * - dropdown-notifications: For notification panel
 *
 * Both automatically get P3 enhancement on capable displays!
 */
